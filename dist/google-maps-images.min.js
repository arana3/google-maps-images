"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function makeStaticMapLocation(t){return new StaticMapLocation(t)}function makeStaticMapMarkerCollection(t){return new StaticMapMarkerCollection(t)}function convertJsonStylersToRules(t){var e=/^#([0-9a-f]{6})$/i,a={};return t.forEach(function(t){var r=Object.keys(t)[0],n=String(t[r]),i=n.match(e);Array.isArray(i)&&(n="0x"+i[1]),a[r]=n}),a}function makeStaticMapStyle(){return new StaticMapStyle}function makeStaticMap$1(t,e){return new StaticMap(t,e)}Object.defineProperty(exports,"__esModule",{value:!0});var queryString=_interopDefault(require("query-string")),classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},get=function t(e,a,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},set=function t(e,a,r,n){var i=Object.getOwnPropertyDescriptor(e,a);if(void 0===i){var s=Object.getPrototypeOf(e);null!==s&&t(s,a,r,n)}else if("value"in i&&i.writable)i.value=r;else{var o=i.set;void 0!==o&&o.call(n,r)}return r},toConsumableArray=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)},StaticMapLocation=function(){function t(e){classCallCheck(this,t),this.location=e}return createClass(t,[{key:"toString",value:function(){return this.location}}],[{key:"fromLatLng",value:function(e,a){return new t(e+","+a)}},{key:"fromAddress",value:function(e){return new t(e)}}]),t}(),StaticMapMarkerCollection=function(){function t(e){classCallCheck(this,t),this.locations=e,this.styles={}}return createClass(t,[{key:"toString",value:function(){var t=this,e=Object.keys(this.styles).map(function(e){return e+":"+t.styles[e]}),a=this.locations.map(function(t){return t.toString()}),r=[].concat(toConsumableArray(e),toConsumableArray(a));return r.join("|")}},{key:"sizeTiny",value:function(){return this.styles.size="tiny",this}},{key:"sizeMid",value:function(){return this.styles.size="mid",this}},{key:"sizeSmall",value:function(){return this.styles.size="small",this}},{key:"color",value:function(t){return this.styles.color=t,this}},{key:"label",value:function(t){return this.styles.label=t,this}},{key:"icon",value:function(t){return this.styles.icon=encodeURI(t),this}}]),t}(),StaticMapStyle=function(){function t(){classCallCheck(this,t),this.params={feature:"",element:"",rules:{}}}return createClass(t,[{key:"toString",value:function(){var t=_extends({feature:this.params.feature,element:this.params.element},this.params.rules),e=Object.keys(t).map(function(e){return e+":"+t[e]});return e.join("|")}},{key:"feature",value:function(t){return this.params.feature=t,this}},{key:"element",value:function(t){return this.params.element=t,this}},{key:"rules",value:function(t){return this.params.rules=t,this}}],[{key:"fromJsonStyleObject",value:function(e){return(new t).feature(e.featureType).element(e.elementType).rules(convertJsonStylersToRules(e.stylers))}}]),t}(),BASE_URL_STATICMAP="https://maps.googleapis.com/maps/api/staticmap?",StaticMap=function(){function t(e,a){classCallCheck(this,t),this.params={size:e+"x"+a},this.markerCollections=[],this.visibleLocations=[],this.styles=[]}return createClass(t,[{key:"generateUrl",value:function(){var t=_extends({},this.params,{markers:this.markerCollections.map(function(t){return t.toString()}),style:this.styles.map(function(t){return t.toString()})});return this.visibleLocations.length>0&&(t.visible=this.visibleLocations.map(function(t){return t.toString()}).join("|")),BASE_URL_STATICMAP+queryString.stringify(t)}},{key:"centerLatLng",value:function(t,e){return this.params.center=StaticMapLocation.fromLatLng(t,e).toString(),this}},{key:"centerAddress",value:function(t){return this.params.center=StaticMapLocation.fromAddress(t).toString(),this}},{key:"zoom",value:function(t){return this.params.zoom=String(t),this}},{key:"doubleScale",value:function(){return this.params.scale="2",this}},{key:"pngFormat",value:function(){return this.params.format="png",this}},{key:"jpegFormat",value:function(){return this.params.format="jpg",this}},{key:"maptypeRoadmap",value:function(){return this.params.maptype="roadmap",this}},{key:"maptypeSatellite",value:function(){return this.params.maptype="satellite",this}},{key:"maptypeTerrain",value:function(){return this.params.maptype="terrain",this}},{key:"maptypeHybrid",value:function(){return this.params.maptype="hybrid",this}},{key:"language",value:function(t){return this.params.language=t,this}},{key:"region",value:function(t){return this.params.region=t,this}},{key:"addMarkerCollections",value:function(t){return this.markerCollections=[].concat(toConsumableArray(this.markerCollections),toConsumableArray(t)),this}},{key:"addVisibleLocations",value:function(t){return this.visibleLocations=[].concat(toConsumableArray(this.visibleLocations),toConsumableArray(t)),this}},{key:"addStyles",value:function(t){return this.styles=[].concat(toConsumableArray(this.styles),toConsumableArray(t)),this}},{key:"addStylesFromJsonObjects",value:function(t){return this.addStyles(t.map(function(t){return StaticMapStyle.fromJsonStyleObject(t)})),this}},{key:"apiKey",value:function(t){return this.params.key=t,this}},{key:"signature",value:function(t){return this.params.signature=t,this}}]),t}(),StaticMapAuthenticatedFactory=function(){function t(e){classCallCheck(this,t),this.makeStaticMapLocation=makeStaticMapLocation,this.makeStaticMapMarkerCollection=makeStaticMapMarkerCollection,this.makeStaticMapStyle=makeStaticMapStyle,this.StaticMap=StaticMap,this.StaticMapLocation=StaticMapLocation,this.StaticMapMarkerCollection=StaticMapMarkerCollection,this.StaticMapStyle=StaticMapStyle,this.apiKey=e}return createClass(t,[{key:"makeStaticMap",value:function(t,e){var a=new StaticMap(t,e);return a.apiKey(this.apiKey),a}}]),t}();exports.StaticMap=StaticMap,exports.StaticMapLocation=StaticMapLocation,exports.StaticMapMarkerCollection=StaticMapMarkerCollection,exports.StaticMapStyle=StaticMapStyle,exports.StaticMapAuthenticatedFactory=StaticMapAuthenticatedFactory,exports.makeStaticMap=makeStaticMap$1,exports.makeStaticMapLocation=makeStaticMapLocation,exports.makeStaticMapMarkerCollection=makeStaticMapMarkerCollection,exports.makeStaticMapStyle=makeStaticMapStyle;
